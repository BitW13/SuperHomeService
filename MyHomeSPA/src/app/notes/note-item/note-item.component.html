<div *ngIf='!isEditNote; else editTemplate'>
    <mat-card class="example-card" style="width: 18rem;">
        <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>

            <div *ngIf='noteCard.note.noteCategoryId != 0; else defaultCategory'>
                <mat-card-subtitle><h6>Категория:</h6>{{noteCard.noteCategory.name}}</mat-card-subtitle>
            </div>
            <ng-template #defaultCategory>
                <mat-card-subtitle><h6>Категория:</h6>Без категории</mat-card-subtitle>
            </ng-template>                        
        </mat-card-header>

        <mat-card-content>
            <hr/>
            <h6>{{noteCard.note.name}}</h6>
            <hr/>
            <p>
                {{noteCard.note.text}}
            </p>
            <hr/>
            <label class="card-text">Дата изменения:</label>
            <p class="card-text">{{noteCard.note.lastChange | date:'fullDate'}}</p>
        </mat-card-content>

        <mat-card-actions>
                <button color="primary" (click)='editNote()' mat-button>Изменить</button>
                <button color="warn" (click)='deleteNote()' mat-button>Удалить</button>
        </mat-card-actions>

    </mat-card>
</div>

<ng-template #editTemplate>

    <mat-card class="example-card" style="width: 18rem;">

        <mat-card-content>

            <form class="example-form">

                <mat-form-field>
                    <mat-label>Категория</mat-label>

                    <mat-select [(ngModel)]='noteCard.note.noteCategoryId' [ngModelOptions]="{standalone: true}" [(value)]='noteCard.note.noteCategoryId'>
                        <mat-option value='0'>
                            Без категории
                        </mat-option>
                        <mat-option *ngFor='let category of categories' value='{{category.id}}' >
                            {{category.name}}
                        </mat-option>
                    </mat-select>

                </mat-form-field>

                <mat-form-field class="example-full-width">

                    <input matInput placeholder="Название" 
                    [(ngModel)]='noteCard.note.name'
                    [ngModelOptions]="{standalone: true}">

                    <button mat-button *ngIf="noteCard.note.name" matSuffix mat-icon-button aria-label="Clear" (click)="noteCard.note.name=''">
                        <mat-icon>close</mat-icon>
                    </button>

                </mat-form-field>

                <mat-form-field class="example-full-width">
                    <textarea wrap="soft" matInput placeholder="Описание" 
                    [(ngModel)]='noteCard.note.text'
                    [ngModelOptions]="{standalone: true}"></textarea>
                </mat-form-field>
                
            </form>
        </mat-card-content>

        <mat-card-actions>
                <button color="primary" (click)='saveNote()' mat-button>Сохранить</button>
                <button color="warn" (click)='cancel()' mat-button>Отменить</button>
        </mat-card-actions>

    </mat-card>

</ng-template>